{"version":3,"sources":["client.js","saw.js","store.js"],"names":[],"mappings":"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","file":"dist.js","sourcesContent":["var Client = function(config){\n  c = {};\n\n  if(typeof config == \"string\"){\n    var c = {\n      config: {\n        path: config\n      }\n    }\n  }else{\n    var c = {\n      config: config\n    }\n  }\n\n  var $ = Client.jQuery\n  c.config.scope = c.config.scope || \"\";\n  c.config.scope = c.config.scope.replace(\", \", \" \").split(\" \");\n  c.config.crudUrls = c.config.crudUrls || JSON.parse(JSON.stringify(Client.config.crudUrls));\n\n  var scopeCheck = function (scope){\n    return !c.config.scope || (c.config.scope && c.config.scope.indexOf(scope) != -1);\n  }\n\n  if(scopeCheck(\"create\")){\n    c.create = function(params){\n      return $.post(this.config.path + c.config.crudUrls.create, params);\n    }    \n  }\n\n  if(scopeCheck(\"update\")){\n    c.update = function(id, params){\n      var path = c.config.crudUrls.update.replace(\":id\", id);\n      return $.put(this.config.path + path, params);\n    }\n  }\n  \n  if(scopeCheck(\"find\")){\n    c.find = function(params){\n      return $.get(this.config.path + c.config.crudUrls.find, params);\n    }\n  }\n  \n  if(scopeCheck(\"findOne\")){\n    c.findOne = function(params){\n      var path = c.config.crudUrls.findOne.replace(\":id\", params.id);\n      delete params.id;\n      return $.get(this.config.path + path, params);\n    }\n  }\n\n  if(scopeCheck(\"remove\")){\n    c.remove = function(params){\n      var path = c.config.crudUrls.remove.replace(\":id\", params.id);\n      delete params.id;\n      return $.delete(this.config.path + path, params);\n    }\n  }\n\n  return c;\n}\n\nClient.config = {\n  crudUrls: {\n    create: \"\", \n    update: \":/id\",\n    find: \"\",\n    findOne: \"/:id\",\n    remove: \"/:id\"\n  }\n}\n\nClient.jQuery = jQuery;","var Model = function(options){\n  var model = {}\n  model.config = options\n\n  var setAction = function(action){\n    model[action] = function(params){\n      return {\n        store: function(){\n          var actionPromise = model.Client[action](params)\n          actionPromise.then(function(response){\n            var storeItem = {};\n            storeItem[action] = response;\n            model.store.set(storeItem);  \n          })\n        }\n      };\n    }\n  \n  }\n  \n  var scopeCheck = function (scope){\n    return !model.config.scope || (model.config.scope && model.config.scope.indexOf(scope) != -1);\n  }\n\n  if(scopeCheck(\"create\")){\n    setAction(\"create\")\n  }\n  if(scopeCheck(\"update\")){\n    setAction(\"update\")\n  }\n  if(scopeCheck(\"remove\")){\n    setAction(\"remove\")\n  }\n  if(scopeCheck(\"find\")){\n    setAction(\"find\")\n  }\n  if(scopeCheck(\"findAll\")){\n    setAction(\"findAll\")\n  }\n}","Store = function(el) {\n\n  /**\n   * Extend the original object or create a new empty one\n   * @type { Object }\n   */\n\n  el = el || {}\n\n\n  /**\n   * Private variables and methods\n   */\n\n  var callbacks = {},\n    onEachEvent = function(e, fn) { e.replace(/\\S+/g, fn) },\n    defineProperty = function (key, value) {\n      Object.defineProperty(el, key, {\n        value: value,\n        enumerable: false,\n        writable: false,\n        configurable: false\n      })\n    },\n    processData = function(target, values){\n      if(el.model){\n        values = el.model(values)\n      }\n\n      Object.keys(values).forEach(function(key){\n        value = values[key];\n        target[key] = value\n        if(target == el){\n          target.trigger(key, value)\n        }\n      })\n    }\n\n  /**\n   * Listen to the given space separated list of `events` and execute the `callback` each time an event is triggered.\n   * @param  { String } events - events ids\n   * @param  { Function } fn - callback function\n   * @returns { Object } el\n   */\n\n  defineProperty('on', function(events, fn) {\n    if (typeof fn != 'function')  return el\n\n    onEachEvent(events, function(name, pos) {\n      (callbacks[name] = callbacks[name] || []).push(fn)\n      fn.typed = pos > 0\n    })\n\n    return el\n  })\n\n\n  /**\n   * Set data on element\n   * @param  { String } events - events ids\n   * @param  { Anything } anything you want to attach\n   * @returns { Object } el\n   */\n  defineProperty('set', function(values) {\n\n    if(\"length\" in el){\n      el.splice(0,el.length)\n      values.forEach(function(row){\n        el.push(processData({}, row))  \n      })\n    }else{\n      processData(el, values)\n    }\n    el.trigger(\"set\", el)\n    \n    return el\n  })\n\n  /**\n   * Removes the given space separated list of `events` listeners\n   * @param   { String } events - events ids\n   * @param   { Function } fn - callback function\n   * @returns { Object } el\n   */\n\n  defineProperty('off', function(events, fn) {\n    if (events == '*') callbacks = {}\n    else {\n      onEachEvent(events, function(name) {\n        if (fn) {\n          var arr = callbacks[name]\n          for (var i = 0, cb; cb = arr && arr[i]; ++i) {\n            if (cb == fn) arr.splice(i--, 1)\n          }\n        } else delete callbacks[name]\n      })\n    }\n    return el\n  })\n\n  /**\n   * Listen to the given space separated list of `events` and execute the `callback` at most once\n   * @param   { String } events - events ids\n   * @param   { Function } fn - callback function\n   * @returns { Object } el\n   */\n\n  defineProperty('one', function(events, fn) {\n    function on() {\n      el.off(events, on)\n      fn.apply(el, arguments)\n    }\n    return el.on(events, on)\n  })\n\n  /**\n   * Execute all callback functions that listen to the given space separated list of `events`\n   * @param   { String } events - events ids\n   * @returns { Object } el\n   */\n\n  defineProperty('trigger', function(events) {\n\n    // getting the arguments\n    // skipping the first one\n    var arglen = arguments.length - 1,\n      args = new Array(arglen)\n    for (var i = 0; i < arglen; i++) {\n      args[i] = arguments[i + 1]\n    }\n\n    onEachEvent(events, function(name) {\n\n      var fns = (callbacks[name] || []).slice(0)\n\n      for (var i = 0, fn; fn = fns[i]; ++i) {\n        if (fn.busy) return\n        fn.busy = 1\n\n        try {\n          fn.apply(el, fn.typed ? [name].concat(args) : args)\n        } catch (e) { el.trigger('error', e) }\n        if (fns[i] !== fn) { i-- }\n        fn.busy = 0\n      }\n\n      if (callbacks.all && name != 'all')\n        el.trigger.apply(el, ['all', name].concat(args))\n\n    })\n\n    return el\n  })\n\n  return el\n\n}"],"sourceRoot":"/source/"}